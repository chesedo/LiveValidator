var LiveValidator=LiveValidator||{};LiveValidator.defaults={themeData:{},required:!1,liveEnabled:!0,checks:[],locale:"en-us",debug:!1},LiveValidator.name="LiveValidator",LiveValidator.Core=function(e,t){if(!(this instanceof LiveValidator.Core))return new LiveValidator.Core(e,t);this.element=e;var i=this.element.hasAttribute("required"),r=new LiveValidator.AutoChecks(this.element);this.options=LiveValidator.utils.extend({},LiveValidator.defaults,{required:i},{checks:r.getChecks()},LiveValidator.utils.getData(this.element),t),this.tester=new LiveValidator.Tester(this.options.locale),this.missing=!1,this.errors=[],this._blurEvent=this._blur.bind(this),this._inputEvent=this._input.bind(this),this.logLevels=["DEBUG","INFO","ERROR"],this._init()},LiveValidator.Core.prototype={_init:function(){this._isValidTheme(this.options.theme)?(this.theme=new this.options.theme(this.element,this.options.themeData),this._log("LiveValidator is using the theme "+this.theme.constructor.name)):(this.theme=new LiveValidator.themes.Default(this.element,this.options.themeData),this._log("LiveValidator is using the default theme")),this.options.required?this.theme.markRequired():this.theme.unmarkRequired(),this.options.liveEnabled?this.enableLive():this.disableLive(),this._log("Binding the blur event",2),this.element.addEventListener("blur",this._blurEvent),this.options.checks=this._filterChecks(this.options.checks)},_isValidTheme:function(e){var t=["markRequired","unmarkRequired","setMissing","unsetMissing","clearErrors","addErrors"];if(this._log("Testing if theme is valid",2),"function"!=typeof e)return this._log("Custom theme is not a function",3),!1;for(var i=0;i<t.length;i++)if("function"!=typeof e.prototype[t[i]])return this._log("Custom theme is not valid - missing the function `"+t[i]+"`",2),!1;return this._log("Custom theme is valid",2),!0},_filterChecks:function(e){var t={};if(this._log("Filtering checks",2),"Array"!==e.constructor.name)return this._log("Checks is not an array; cannot use it",3),[];var i=e.filter(function(e){return"object"==typeof e&&(e=Object.keys(e)[0]),"function"==typeof this.tester[e]?!t.hasOwnProperty(e)&&(t[e]=!0):(this._log("`"+e+"` check does not exist so it will not be added to checks"),!1)},this);return this._log("Valid checks are: "+Object.keys(t)),i},_blur:function(){var e=this.element.value,t=e.trim();if(this._log("Blur triggered"),e!==t&&(this.element.value=t,this._log("Trimed spaces from input",2)),this.missing=!1,""===t){if(this.options.required)return this._log("Input is empty and required",2),this.missing=!0,this.theme.setMissing(),void this.theme.clearErrors();this._log("Input is empty and not required",2),this.theme.unsetMissing(),this.theme.clearErrors()}else this.theme.unsetMissing(),this._log("Input has data so will perform checks",2),this._performChecks(t)},_input:function(){var e=this.element.value;""!==e?(this._log("Value not empty so will perform checks",2),this._performChecks(e)):(this._log("Value is empty so am removing errors",2),this.theme.clearErrors())},_performChecks:function(e){this.tester.clearErrors();for(var t=0;t<this.options.checks.length;t++){var i=this.options.checks[t],r=null;"object"==typeof i&&(r=i[i=Object.keys(i)[0]]),this.tester[i](e,r),this._log("Performed check `"+i+"`",2)}this.errors=this.tester.getErrors(),0===this.errors.length?this.theme.clearErrors():this.theme.addErrors(this.errors)},setRequired:function(e){e=e||!1,this._log("Input is now required"),this.options.required=!0,this.theme.markRequired(),e&&(this._log("Checking input after making it required",2),this._blur())},unsetRequired:function(){this._log("Input is now not required"),this.options.required=!1,this.theme.unmarkRequired(),this.theme.unsetMissing()},enableLive:function(e){e=e||!1,this._log("Live checking is now enabled"),this.liveEnabled=!0,this.element.addEventListener("input",this._inputEvent),e&&(this._log("Performing checks after enabling live checking",2),this._blur())},disableLive:function(){this._log("Live checking is now disabled"),this.liveEnabled=!1,this.element.removeEventListener("input",this._inputEvent)},addChecks:function(e){this._log("Will now try to add checks: "+e);var t=this.options.checks.concat(e);this.options.checks=this._filterChecks(t)},removeAllChecks:function(){this._log("All check are now removed"),this.options.checks=[]},removeChecks:function(e){return this._log("Will now try to remove checks: "+e),Array.isArray(e)?void(this.options.checks=this.options.checks.filter(function(t){return e.indexOf(t)===-1})):void this._log("removeChecks can not handle a non-array element",3)},isValid:function(){return this._log("Checking if input is valid"),this._blur(),0===this.errors.length&&!this.missing},destroy:function(){this._log("Destroying plugin instance and reseting the input's state"),this.element.removeEventListener("blur",this._blurEvent),this.element.removeEventListener("input",this._inputEvent),this.theme.clearErrors(),this.theme.unsetMissing()},_log:function(e,t){"undefined"==typeof t&&(t=1),t<=this.options.debug&&console.log(this.logLevels[--t]+": "+e)}};var LiveValidator=LiveValidator||{};LiveValidator.Plugin=function(e){function t(e,t){r.forEach(function(i){var r=i.LiveValidator;"destroy"===e?(r.destroy(),delete i.LiveValidator):r[e].apply(r,t)})}if("LiveValidator"===this.name||this instanceof Function)return void LiveValidator.utils.extend(LiveValidator.defaults,e);if(void 0!==e&&("object"!=typeof e||"Array"===e.constructor.name))return!1;var i='input:not([type="button"]):not([type="file"]):not([type="hidden"]):not([type="image"]):not([type="radio"]):not([type="reset"]):not([type="submit"]), textarea',r=[],s=[];return this instanceof HTMLElement?s=[this]:(this instanceof HTMLCollection||this instanceof NodeList||this instanceof jQuery)&&(s=[].slice.call(this)),r=s.filter(function(e){return e.matches(i)}),r=[].concat.apply(r,s.map(function(e){return[].slice.call(e.querySelectorAll(i))})),r.forEach(function(t){t.LiveValidator||(t.LiveValidator=new LiveValidator.Core(t,e))}),{getInputs:function(){return r},isValid:function(){var e=!0;return r.forEach(function(t){t.LiveValidator.isValid()||(e=!1)}),e},setRequired:function(){t("setRequired",arguments)},unsetRequired:function(){t("unsetRequired")},enableLive:function(){t("enableLive",arguments)},disableLive:function(){t("disableLive")},addChecks:function(){t("addChecks",arguments)},removeAllChecks:function(){t("removeAllChecks")},removeChecks:function(){t("removeChecks",arguments)},destroy:function(){t("destroy"),r=[]}}},HTMLElement.prototype.getLiveValidator=LiveValidator.Plugin,HTMLCollection.prototype.getLiveValidator=LiveValidator.Plugin,NodeList.prototype.getLiveValidator=LiveValidator.Plugin,function(e,t,i,r){e.LiveValidator=e.fn.LiveValidator=LiveValidator.Plugin}(jQuery,window,document);var LiveValidator=LiveValidator||{};LiveValidator.AutoChecks=function(e){return this instanceof LiveValidator.AutoChecks?(this.element=e,this.checks=[],void(this.types={numerics:["number","range"],text:["email","password","search","tel","text","url"]})):new LiveValidator.AutoChecks(e)},LiveValidator.AutoChecks.prototype={getChecks:function(){var e=this.element.type;return this.types.numerics.indexOf(e)!==-1&&this._filterNumeric(),this.types.text.indexOf(e)!==-1&&this._filterText(),this.checks},_filterNumeric:function(){this._addCheck("min"),this._addCheck("max")},_filterText:function(){if(this._addCheck("minlength"),this._addCheck("maxlength"),this.element.hasAttribute("pattern")){var e={};e.regex=this.element.getAttribute("pattern"),e.title=this.element.getAttribute("title"),this.checks.push({pattern:e})}},_addCheck:function(e){if(this.element.hasAttribute(e)){var t={};t[e]=parseInt(this.element.getAttribute(e)),this.checks.push(t)}}};var LiveValidator=LiveValidator||{};LiveValidator.Tester=function(e){return this instanceof LiveValidator.Tester?(e=e||"en-us",this.errors=[],this.messages={},void("en-us"!==e?LiveValidator.utils.extend(this.messages,LiveValidator.translations["en-us"],LiveValidator.translations[e]):LiveValidator.utils.extend(this.messages,LiveValidator.translations["en-us"]))):new LiveValidator.Tester},LiveValidator.Tester.prototype.clearErrors=function(){this.errors=[]},LiveValidator.Tester.prototype.addError=function(e){this.errors.push(e)},LiveValidator.Tester.prototype.getErrors=function(){return this.errors},LiveValidator.Tester.prototype.getMessage=function(e){return this.messages[e]||this.messages.default},LiveValidator.Tester.prototype.min=function(e,t){return!!this.isNumber(e)&&(!(e<t)||(this.addError(this.getMessage("minNumber").replace("%d",t)),!1))},LiveValidator.Tester.prototype.max=function(e,t){return!!this.isNumber(e)&&(!(e>t)||(this.addError(this.getMessage("maxNumber").replace("%d",t)),!1))},LiveValidator.Tester.prototype.minlength=function(e,t){return!(e.length<t)||(this.addError(this.getMessage("minlength").replace("%d",t)),!1)},LiveValidator.Tester.prototype.maxlength=function(e,t){return!(e.length>t)||(this.addError(this.getMessage("maxlength").replace("%d",t)),!1)},LiveValidator.Tester.prototype.pattern=function(e,t){var i=new RegExp(t.regex);return!!i.test(e)||(this.addError(t.title),!1)},LiveValidator.Tester.prototype.isNumber=function(e){return!isNaN(Number(e))||(this.addError(this.getMessage("beNumber")),!1)};var LiveValidator=LiveValidator||{};LiveValidator.translations=LiveValidator.translations||{},LiveValidator.translations["en-us"]={minNumber:"Should be more than or equal %d",maxNumber:"Should be less than or equal %d",minlength:"Should be %d characters or more",maxlength:"Should be %d characters or less",beNumber:"Value should be a number",default:"There is an unspecified error with this input"};var LiveValidator=LiveValidator||{};LiveValidator.utils={extend:function(e){e=e||{};for(var t=1;t<arguments.length;t++){var i=arguments[t];if(i)for(var r in i)i.hasOwnProperty(r)&&("[object Object]"===i[r].toString()?e[r]=LiveValidator.utils.extend(e[r],i[r]):e[r]=i[r])}return e},getData:function(e){var t={};for(var i in e.dataset)try{t[i]=JSON.parse(e.dataset[i])}catch(r){t[i]=e.dataset[i]}return t},parentSelector:function(e,t){for(e=e.parentElement;e;){if(e.matches(t))return e;e=e.parentElement}return null},addClass:function(e,t){return e instanceof Element&&(e.classList?e.classList.add(t):e.className+=" "+t,!0)},removeClass:function(e,t){return e instanceof Element&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "),!0)},removeChild:function(e,t){if(e instanceof Element){var i=e.querySelector(t);if(i)return e.removeChild(i)}return null},appendChild:function(e,t){return e instanceof Element?e.appendChild(t):null}},Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),i=t.length;--i>=0&&t.item(i)!==this;);return i>-1});